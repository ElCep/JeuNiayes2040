{
  "openmole-version" : "17.0-SNAPSHOT",
  "execution-id" : "5879ca56-dcf0-4dd8-bf57-2014060539fd",
  "script" : {
    "content" : "import _file_.jeu_niayes_inputs._\nimport _file_.envMuse._\n\n\nval env = LocalEnvironment(1) \n\nDirectSampling(\n  evaluation = javaTask,\n  sampling = \n    (i in (1 to 300 by 1)) x\n    (pluie1 in Seq(20.0,6.0,0.0)) zip\n    (pluie2 in Seq(6.0,20.0,26.0)) \n) hook (workDirectory / \"result_pluies_combine\", Seq(i,pluie1, pluie2, result, waterConsumption, capitalAccumulation), \n        format = OMROutputFormat()) on env //muse by 100",
    "import" : [ {
      "import" : "_file_.jeu_niayes_inputs",
      "content" : "val i = Val[Int]\nval cap1 = Val[Double]\nval cap2 = Val[Double]\nval cap3 = Val[Double]\nval cap4 = Val[Double]\nval surf1 = Val[Int]\nval surf2 = Val[Int]\nval surf3 = Val[Int]\nval surf4 = Val[Int]\nval pluie1 = Val[Double]\nval pluie2 = Val[Double]\n\nval result = Val[Array[Array[Double]]]\nval capitalAccumulation = Val[Double]\nval waterConsumption = Val[Double]\n\n//Defines the task to perform the hello function\nval javaTask = ScalaTask(\"\"\"\n  import scala.jdk.CollectionConverters.*\n  val o = \n    fr.ocelet.model.jeu_niayes.Jeu_Niayes.run(cap1, cap2, cap3, cap4, surf1, surf2, surf3, surf4,pluie1,pluie2)\n  val result = o.asScala.values.map(_.asScala.map(_.doubleValue).toArray).toArray\n  val waterConsumption = result.map(a => a(2)).sum\n  val capitalAccumulation = result.map(a => a(1)).sum\n  \"\"\") set (\n  libraries += workDirectory / \"jeu_niayes.jar\",\n  inputs += i,\n  inputs += (cap1, cap2, cap3, cap4, surf1, surf2, surf3, surf4, pluie1, pluie2),\n  outputs += (i, cap1, cap2, cap3, cap4, surf1, surf2, surf3, surf4, pluie1, pluie2, result, waterConsumption, capitalAccumulation),\n  // Default values. Can be removed if OpenMOLEÂ Vals are set by values coming from the workflow\n  /*cap1 := 11,\n  cap2 := 12,\n  cap3 := 15,\n  cap4 := 18,\n  surf1 := 2,\n  surf2 := 1,\n  surf3 := 1,\n  surf4 := 3,\n  pluie1 := 750,\n  pluie2 := 750*/\n  cap1 := 20,\n  cap2 := 11,\n  cap3 := 8,\n  cap4 := 11,\n  surf1 := 2,\n  surf2 := 3,\n  surf3 := 2,\n  surf4 := 1,\n  //pluie1 := 0.0,\n  //pluie2 := 26.0\n) \n\n"
    }, {
      "import" : "_file_.envMuse",
      "content" : "val muse = SLURMEnvironment(\n    \"delaye\",\n    \"muse-login.hpc-lr.univ-montp2.fr\",\n    // optional parameters\n    partition = \"agap_normal\", // can be agap_short agap_normal agap_long\n    workDirectory = \"/lustre/delaye/openmole\",\n    //workDirectory = \"/home/delaye/scratch/openmole\",\n    sharedDirectory = \"/storage/replicated/cirad_users/delaye/openmole\",\n    time = 1 hours\n  )\n"
    } ]
  },
  "time-start" : 1712747301977,
  "time-save" : 1712747302423,
  "data" : [ {
    "variables" : {
      "i" : [ 1, 1, 1 ],
      "pluie1" : [ 20.0, 0.0, 6.0 ],
      "pluie2" : [ 6.0, 26.0, 20.0 ],
      "result" : [ [ [ 2.574, 22.0, 34.0, 0.0, 0.0, 10.0, 2.0, 0.0, 1.0, 0.0, 1.0, 0.0, 2.0, 3.0, 0.0, 0.0, 1.0, 3.0, 3.0 ], [ 2.574, 43.0, 23.0, 0.0, 0.0, 5.0, 2.0, 1.0, 1.0, 1.0, 4.0, 0.0, 3.0, 0.0, 0.0, 6.0, 3.0, 1.0, 1.0 ], [ 2.574, 31.0, 35.0, 0.0, 0.0, 5.0, 2.0, 1.0, 4.0, 0.0, 2.0, 2.0, 1.0, 0.0, 0.0, 6.0, 2.0, 2.0, 4.0 ], [ 2.574, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 2.0, 2.0, 4.0, 1.0, 1.0, 1.0, 0.0, 0.0, 6.0, 4.0, 4.0, 2.0 ] ], [ [ 2.34, 39.5, 50.0, 0.0, 1.0, 5.0, 1.0, 3.0, 1.0, 1.0, 4.0, 1.0, 1.0, 2.0, 0.0, 4.0, 3.0, 3.0, 4.0 ], [ 2.34, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 2.0, 4.0, 1.0, 3.0, 0.0, 0.0, 6.0, 4.0, 2.0, 1.0 ], [ 2.34, 4.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 2.0, 2.0, 0.0, 0.0, 4.0, 1.0, 4.0, 3.0 ], [ 2.34, 22.5, 36.0, 0.0, 0.0, 10.0, 2.0, 3.0, 1.0, 2.0, 2.0, 1.0, 1.0, 0.0, 2.0, 4.0, 2.0, 1.0, 2.0 ] ], [ [ 0.7410000000000001, 17.0, 25.0, 0.0, 1.0, 5.0, 1.0, 2.0, 0.0, 0.0, 1.0, 4.0, 2.0, 2.0, 0.0, 3.0, 1.0, 4.0, 2.0 ], [ 0.7410000000000001, 6.0, 5.0, 0.0, 0.0, 0.0, 1.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 0.0, 0.0, 6.0, 3.0, 3.0, 1.0 ], [ 0.7410000000000001, 0.0, 0.0, 0.0, 0.0, 0.0, 2.0, 3.0, 2.0, 1.0, 0.0, 2.0, 2.0, 0.0, 0.0, 6.0, 2.0, 2.0, 4.0 ], [ 0.7410000000000001, 10.0, 15.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 2.0, 2.0, 3.0, 0.0, 0.0, 0.0, 5.0, 4.0, 1.0, 3.0 ] ] ],
      "waterConsumption" : [ 92.0, 86.0, 45.0 ],
      "capitalAccumulation" : [ 96.0, 66.0, 33.0 ]
    }
  } ]
}